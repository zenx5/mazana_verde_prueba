import{d as C,r as g,a as u,k as z,h as S,o as f,l as D,w as _,g as c,b as e,c as w,m as O,t as i,f as b,F as P,n as T,s as R,p as B}from"./index-fa5b4631.js";class A{static async get(l){try{return await(await fetch("http://zenx5.pro/api/foods",{referrerPolicy: "unsafe_url", headers:{Authorization:"Bearer "+l}})).json()}catch{return{success:!1,data:[],message:"Error al obtener los productos"}}}}const N=e("h2",{class:"text-2xl text-center p-4 sticky top-0 bg-green-500 text-white border-b-2 shadow-md font-bold"},"Confirmar Pedido",-1),F={class:"mt-8"},H={role:"list",class:"-my-6 divide-y divide-gray-200 border border-black"},L={class:"flex flex-row justify-between px-5"},Q={class:"h-20 w-20 flex-shrink-0 overflow-hidden rounded-md border border-gray-200"},U=["src","alt"],G={class:"sm:hidden block"},J={class:"font-bold"},K={class:"text-gray-500"},M={class:"ml-4 flex flex-1 flex-col"},W={class:"flex justify-between text-base font-medium text-gray-900"},X={class:"font-bold hidden sm:block"},Y={class:"ml-4 flex flex-col items-end"},Z=e("span",{class:"font-semibold"},"Precio:",-1),ee=e("span",{class:"font-semibold"},"Precio por Unidad:",-1),te={class:"flex flex-1 items-end justify-between text-sm"},se={class:"text-gray-500 hidden sm:block"},oe={class:"flex"},le=["onClick"],ne=C({__name:"OrderDetails",props:{products:{}},emits:["remove","close","confirm"],setup(x,{emit:l}){const{products:t}=x,a=g(t.length<3),p=o=>{a.value=o.target.scrollTop+o.target.offsetHeight===o.target.scrollHeight};return(o,m)=>{const $=u("v-card-text"),y=u("v-spacer"),h=u("v-btn"),E=u("v-card-actions"),j=u("v-card"),q=z("scroll");return S((f(),D(j,{"max-height":"500",class:"overflow-y-auto"},{default:_(()=>[N,c($,{class:"px-5"},{default:_(()=>[e("div",F,[e("div",null,[e("ul",H,[(f(!0),w(P,null,O(o.products,d=>(f(),w("li",{key:d.id,class:"flex flex-col sm:flex-row py-2"},[e("div",L,[e("div",Q,[e("img",{src:d.image,alt:d.description.substring(0,10),class:"h-full w-full object-cover object-center",lazy:""},null,8,U)]),e("div",G,[e("h3",J,i(d.name),1),e("p",K,"Qty "+i(d.quantity),1)])]),e("div",M,[e("div",null,[e("div",W,[e("h3",X,[e("p",null,i(d.name),1)]),e("p",Y,[e("span",null,[Z,b(" "+i(" ")+i(d.quantity*d.price),1)]),e("small",null,[ee,b(i(" ")+i(d.price),1)])])])]),e("div",te,[e("p",se,"Qty "+i(d.quantity),1),e("div",oe,[e("button",{type:"button",onClick:r=>l("remove",d.id),class:"font-medium py-1 px-2 text-green-600 hover:text-green-500 border hover:!border-green-500 rounded"},"Remove",8,le)])])])]))),128))])])])]),_:1}),c(E,{class:T("sticky bottom-0 bg-white mt-2 gap-2 sm:gap-10 px-5 pb-4 pt-3 "+(a.value?"":"shadow-t-md"))},{default:_(()=>[c(y),c(h,{class:"font-bold !text-blue-400 rounded !border !border-blue-400 hover:bg-blue-400 hover:!text-white",onClick:m[0]||(m[0]=d=>l("close"))},{default:_(()=>[b("Volver")]),_:1}),c(h,{class:"font-bold !text-green-700 rounded !border !border-green-500 hover:bg-green-500 hover:!text-white",onClick:m[1]||(m[1]=d=>l("confirm"))},{default:_(()=>[b("Confirmar")]),_:1})]),_:1},8,["class"])]),_:1})),[[q,p,void 0,{self:!0}]])}}}),ae=e("h2",{class:"text-2xl text-center p-4 sticky top-0 bg-green-500 text-white border-b-2 shadow-md font-bold"},"Pedido Confirmado",-1),re={class:"text-xl"},ce=e("p",{class:"text-xl"},"Tu pedido llegara en 30 minutos",-1),de=C({__name:"OrderSuccess",props:{username:{}},emits:["close"],setup(x,{emit:l}){const t=()=>{l("close")};return(a,p)=>{const o=u("v-card-title"),m=u("v-card-text"),$=u("v-btn"),y=u("v-card-actions"),h=u("v-card");return f(),D(h,null,{default:_(()=>[c(o,{class:"text-center"},{default:_(()=>[ae]),_:1}),c(m,{class:"text-center"},{default:_(()=>[e("p",re,"Gracias por tu compra "+i(a.username),1),ce]),_:1}),c(y,{class:"justify-center"},{default:_(()=>[c($,{color:"green",onClick:t},{default:_(()=>[b("Aceptar")]),_:1})]),_:1})]),_:1})}}}),ie={class:"aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-md bg-gray-200 lg:aspect-none group-hover:opacity-75 lg:h-40"},ue=["src","alt"],_e={class:"mt-4 flex justify-between"},me={class:"text-sm text-gray-700"},pe={class:"text-sm font-medium text-gray-900"},ve={class:"flex flex-row justify-between items-center"},fe=C({__name:"ProductCard",props:{product:{},selected:{type:Boolean},quantity:{}},emits:["add","remove"],setup(x,{emit:l}){return(t,a)=>{const p=u("v-btn");return f(),w("div",{class:T("group relative p-1 rounded-md shadow-md hover:shadow-lg "+(t.selected?"bg-green-300 border-2 border-green-500":"border-2 border-white bg-white"))},[e("div",ie,[e("img",{src:t.product.image,alt:t.product.description,class:"h-full w-full object-cover object-center lg:h-full lg:w-full"},null,8,ue)]),e("div",_e,[e("div",null,[e("h3",me,[e("p",null,i(t.product.name),1)])]),e("p",pe,i(t.product.price),1)]),e("div",ve,[c(p,{size:"small",color:"#E0E0E0",class:"hover:!bg-red-300",onClick:a[0]||(a[0]=o=>l("remove",t.product.id)),icon:"mdi-minus"}),e("span",null,i(t.quantity),1),c(p,{size:"small",color:"#E0E0E0",class:"hover:!bg-blue-300",onClick:a[1]||(a[1]=o=>l("add",t.product.id)),icon:"mdi-plus"})])],2)}}}),he={class:"bg-white flex flex-col sm:flex-row justify-between p-5 pt-10 mx-auto rounded-t-xl shadow-t-xl w-10/12 absolute bottom-0"},be={class:"px-5"},ge={class:"font-semibold"},xe={class:"flex flex-row gap-4"},ye=e("span",{class:"font-bold"},"Total",-1),we={class:"px-5"},$e=C({__name:"DetailFooter",props:{username:{},total:{},disabled:{type:Boolean}},emits:["checkout"],setup(x,{emit:l}){return(t,a)=>{const p=u("v-btn");return f(),w("div",he,[e("div",be,[e("p",null,[b("Hola "),e("span",ge,i(t.username),1),b(", aqui puedes ver el costo de tu pedido")]),e("p",xe,[ye,e("span",null,i(t.total),1)])]),e("div",we,[c(p,{color:"green",onClick:a[0]||(a[0]=o=>l("checkout")),disabled:t.disabled},{default:_(()=>[b("Confirmar")]),_:1},8,["disabled"])])])}}}),ke={class:"mx-auto max-w-2xl px-4 py-16 sm:px-6 sm:py-24 lg:max-w-7xl lg:px-8"},Ce=e("h2",{class:"text-2xl font-bold tracking-tight text-gray-900"},"Selecciona tu pedido",-1),Ee={class:"mt-6 grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-4"},je=0,V=1,I=2,Se=C({__name:"List",setup(x){const l=g([]),t=g([]),a=g(0),p=g(R.state.user.name),o=g(!1),m=g(je);A.get(R.state.token).then(({data:r})=>{l.value=r});const $=r=>{t.value.push(r),E()},y=r=>{const s=t.value.findIndex(v=>v===r);s!==-1&&(t.value=t.value.filter((v,n)=>n!==s),t.value.length===0&&(o.value=!1),E())},h=r=>t.value.filter(s=>s===r).length,E=()=>{a.value=t.value.reduce((r,s)=>{const v=l.value.find(n=>n.id===s);return r+v.price},0)},j=()=>{o.value=!0,m.value=V},q=()=>t.value.reduce((r,s)=>{const v=l.value.find(k=>k.id===s),n=r.findIndex(k=>k.id===s);return n===-1?r.push({...v,price:v.price,quantity:h(s)}):r[n].quantity=h(s),r},[]),d=()=>{t.value=[],a.value=0,o.value=!0,m.value=I};return(r,s)=>{const v=u("v-dialog");return f(),w("div",null,[e("div",ke,[Ce,e("div",Ee,[(f(!0),w(P,null,O(l.value,n=>(f(),D(fe,{key:n.id,product:n,selected:t.value.includes(n.id),quantity:h(n.id),onAdd:k=>$(n.id),onRemove:k=>y(n.id)},null,8,["product","selected","quantity","onAdd","onRemove"]))),128))])]),c($e,{username:p.value,total:a.value,disabled:t.value.length===0,onCheckout:j},null,8,["username","total","disabled"]),c(v,{modelValue:o.value,"onUpdate:modelValue":s[3]||(s[3]=n=>o.value=n),class:"w-full sm:w-8/12"},{default:_(()=>[S(c(ne,{products:q(),onConfirm:d,onClose:s[0]||(s[0]=()=>o.value=!1),onRemove:s[1]||(s[1]=n=>y(n))},null,8,["products"]),[[B,m.value===V]]),S(c(de,{username:p.value,onClose:s[2]||(s[2]=()=>{o.value=!1})},null,8,["username"]),[[B,m.value===I]])]),_:1},8,["modelValue"])])}}});export{Se as default};
