import{d as w,r as v,u as S,i as b,a as _,c as u,b as c,e as y,f as l,t as k,g as o,w as t,o as g,s as C}from"./index-fa5b4631.js";import{l as I}from"./logo-mv-1d56246e.js";import{U as N}from"./UserService-d1854abc.js";const j=async(d,s)=>{var n;const r=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${d}&lon=${s}`;try{const e=await(await fetch(r)).json();return(n=e==null?void 0:e.address)!=null&&n.country?{status:"success",message:"ubicacion determinada exitosamente",data:e.address}:{status:"error",message:"no se pudo determinar la ubicacion",data:null}}catch(i){return console.error("Error al obtener el país:",i),{status:"error",message:"error al obtener el pais",data:i}}},V=async d=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(async s=>{const{latitude:r,longitude:n}=s.coords,i=sessionStorage.getItem("latitude"),e=sessionStorage.getItem("longitude");if(i===r.toString()&&e===n.toString()){const a=sessionStorage.getItem("country");if(a){d(JSON.parse(a));return}}sessionStorage.setItem("latitude",r.toString()),sessionStorage.setItem("longitude",n.toString());const{data:m}=await j(r,n);sessionStorage.setItem("country",JSON.stringify(m)),d(m)},s=>{console.error("Error al obtener la posición:",s)}):console.error("Geolocalización no está disponible en este navegador.")},B={class:"w-full h-full"},E={class:"flex flex-col items-center justify-center h-1/4"},$=["src"],q=c("small",null,"Presenta",-1),z=c("h3",{class:"text-lg font-semibold mt-3"},"Hungriest",-1),H={class:"flex flex-col items-center justify-start h-3/4 pt-40"},J=c("h1",{class:"text-3xl text-center font-bold"},"Bienvenido, saludos a ",-1),L={key:0,class:"flex flex-row gap-2 border p-3 px-6 rounded-md mt-4 bg-white"},O=["src","alt"],P={key:1,class:"flex flex-row gap-2 border p-3 px-6 rounded items-center mt-4"},U={key:2,class:"flex flex-col items-center gap-5"},D={key:3,class:"flex flex-col items-center"},T=w({__name:"HomeView",setup(d){const s=v(""),r=v(""),n=v(!0),i=S(),e=b("$cookies");V(a=>{s.value=a.country,r.value=a.country_code,n.value=!1});const m=async()=>{if(e){const a=e==null?void 0:e.get("token-hungriest");a&&(await N.logout(a),e.remove("token-hungriest")),i.push({name:"login"})}};return(a,F)=>{const x=_("v-skeleton-loader"),f=_("v-icon"),p=_("v-btn"),h=_("router-link");return g(),u("main",B,[c("div",E,[c("img",{class:"mx-auto w-40",src:y(I),alt:"Manzana Verde"},null,8,$),q,z]),c("div",H,[J,n.value?(g(),u("div",P,[o(x,{type:"image",width:"48",height:"36",class:"overflow-hidden"}),o(x,{type:"text",width:"100",height:"36"})])):(g(),u("div",L,[c("img",{src:`https://flagcdn.com/48x36/${r.value}.png`,width:"32",alt:s.value},null,8,O),l(" "+k(s.value),1)])),y(C).state.logged?(g(),u("div",U,[o(h,{to:"/food",class:"mt-5"},{default:t(()=>[o(p,{class:"mt-20",color:"green"},{append:t(()=>[o(f,null,{default:t(()=>[l("mdi-arrow-right")]),_:1})]),default:t(()=>[l(" Ir al menu ")]),_:1})]),_:1}),o(p,{color:"red",onClick:m},{append:t(()=>[o(f,null,{default:t(()=>[l("mdi-logout")]),_:1})]),default:t(()=>[l(" Salir ")]),_:1})])):(g(),u("div",D,[o(h,{to:"/login",class:"mt-5"},{default:t(()=>[o(p,{class:"mt-20",color:"green"},{append:t(()=>[o(f,null,{default:t(()=>[l("mdi-account")]),_:1})]),default:t(()=>[l(" Ingresa aquí ")]),_:1})]),_:1}),o(h,{to:"/register",class:"mt-5"},{default:t(()=>[l("o registrate aquí")]),_:1})]))])])}}});export{T as default};
